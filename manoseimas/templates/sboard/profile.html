{% extends "sboard/base.html" %}
{% load i18n %}
{% load thumbnail %}
{% load manoseimas %}
{% load sboard %}

{% block content %}
<h1>Naudotojas</h1>
<p>{% nodeimage profile 'large' %}</p>
<h1>{{ profile.title|default:profile.user.username }}</h1>
{% if profile.dob %}
<p>{% trans "Date of birth" %}: {{ profile.dob }} ({{ profile.age }} {{ profile.age|age_plural }})</p>
{% endif %}
{% if profile.home_page %}
<p><a href="{{ profile.home_page }}">{% trans "Home page" %}</a></p>
{% endif %}

{% if request.user = profile.user %}
<hr style="clear: both">

<h2>Politiniai sprendimai</h2>

<ul class="positions">
  {% for position in positions %}
  <li>
    Balsavo <strong title="{{ position.percent }}">{{ position.position|lower }}</strong> temą
    <a class="profile-solution-title arrow-before" href="{% nodeurl position.solution.ref %}">{{ position.solution.ref.title }}</a>
    <a href="#" class="icon-remove" title="Ištrinti pasirinkimą" data-solution="{{ position.solution.ref.key }}"></a>
  </li>
  {% endfor %}
</ul>
{% endif %}

{% endblock %}

{% block inlinejs %}
<script type="text/javascript">
$(function() {
  $(".positions .icon-remove").click(function() {
    var li = $(this).parent();
    var node = $(this).attr('data-solution');
    var url = "/testas/submit-position/";
    console.log(li, node, url);
    manoSeimas.submitPosition(url, node, 0, function() {
      li.hide();
    });
  });
});
</script>
{% endblock %}
